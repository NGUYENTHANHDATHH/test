Class Q1
Äiá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y lÃ  gÃ¬
Äiá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y lÃ  viá»‡c cung cáº¥p cÃ¡c dá»‹ch vá»¥ cho khÃ¡ch hÃ ng qua Internet, kÃ­ch hoáº¡t cÃ¡c dá»‹ch vá»¥ quy mÃ´ lá»›n mÃ  khÃ´ng cáº§n Ä‘áº§u tÆ° trÆ°á»›c
Táº¡i sao chÃºng ta cáº§n Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y?
Tiáº¿t kiá»‡m chi phÃ­, dá»… má»Ÿ rá»™ng, an toÃ n, linh hoáº¡t, vÃ  há»— trá»£ Ä‘á»•i má»›i nhanh chÃ³ng so vá»›i háº¡ táº§ng truyá»n thá»‘ng
KhÃ¡ch hÃ ng cÃ³ thá»ƒ cháº¡y vÃ  tháº­m chÃ­ cÃ i Ä‘áº·t nhá»¯ng loáº¡i dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y nÃ o trong cÃ¡c trung tÃ¢m dá»¯ liá»‡u áº£o?
IaaS
PaaS
SaaS
PaaS lÃ  gÃ¬ vÃ  khÃ¡ch hÃ ng cÃ³ thá»ƒ lÃ m gÃ¬ vá»›i nÃ³?
PaaS lÃ  má»™t mÃ´i trÆ°á»ng láº­p trÃ¬nh á»Ÿ trÃªn cloud vÃ  chÃºng ta dÃ¹ng nÃ³ Ä‘á»ƒ phÃ¡t triá»ƒn cÃ¡c dá»‹ch vá»¥ trÃªn cloud
Hoáº·c PaaS lÃ  má»™t ná»n táº£ng Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y cho phÃ©p khÃ¡ch hÃ ng phÃ¡t triá»ƒn, thá»­ nghiá»‡m, triá»ƒn khai vÃ  quáº£n lÃ½ á»©ng dá»¥ng mÃ  khÃ´ng cáº§n lo vá» háº¡ táº§ng pháº§n cá»©ng.
KhÃ¡ch hÃ ng cáº§n gÃ¬ khi sá»­ dá»¥ng dá»‹ch vá»¥ pháº§n má»m?
Cáº§n 1 web browser vÃ  internet
Sá»± khÃ¡c biá»‡t chÃ­nh giá»¯a dá»‹ch vá»¥ ÄÃ¡m mÃ¢y CÃ´ng cá»™ng vÃ  ÄÃ¡m mÃ¢y RiÃªng lÃ  gÃ¬?
Má»©c Ä‘á»™ chia sáº»
Public Cloud: TÃ i nguyÃªn dÃ¹ng chung cho nhiá»u tá»• chá»©c (multi-tenant).
Private Cloud: TÃ i nguyÃªn dÃ nh riÃªng cho má»™t tá»• chá»©c.
Vá»‹ trÃ­ háº¡ táº§ng
Public Cloud: Äáº·t táº¡i trung tÃ¢m dá»¯ liá»‡u cá»§a nhÃ  cung cáº¥p (AWS, Azure, Google Cloudâ€¦).
Private Cloud: Äáº·t táº¡i trung tÃ¢m dá»¯ liá»‡u riÃªng (on-premise) hoáº·c thuÃª riÃªng biá»‡t.
Chi phÃ­
Public Cloud: Tháº¥p, tráº£ tiá»n theo nhu cáº§u (pay-as-you-go).
Private Cloud: Cao, cáº§n Ä‘áº§u tÆ° pháº§n cá»©ng, pháº§n má»m, nhÃ¢n sá»±.
Báº£o máº­t & kiá»ƒm soÃ¡t
Public Cloud: Kiá»ƒm soÃ¡t háº¡n cháº¿, phá»¥ thuá»™c nhÃ  cung cáº¥p.
Private Cloud: ToÃ n quyá»n kiá»ƒm soÃ¡t, báº£o máº­t cao.
Kháº£ nÄƒng má»Ÿ rá»™ng
Public Cloud: Linh hoáº¡t, má»Ÿ rá»™ng nhanh.
Private Cloud: Bá»‹ giá»›i háº¡n bá»Ÿi háº¡ táº§ng sáºµn cÃ³, má»Ÿ rá»™ng cháº­m hÆ¡n
ÄÃ¡m mÃ¢y lai lÃ  gÃ¬?
lÃ  sá»± káº¿t há»£p giá»¯a cÃ¡c Ä‘Ã¡m mÃ¢y
GÃ¡n cÃ¡c danh má»¥c dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y nÃ y cho cÃ¡c lá»›p trong hÃ¬nh
Sass, tro choi dam may, in an dam may
PaaS, HDH
IaaS, HPCaaS, HuaaS
9. GÃ¡n cÃ¡c danh má»¥c dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y nÃ y cho cÃ¡c lá»›p trong hÃ¬nh
SaaS: Google Cloud Print, Google Apps, OnLive, Amazon Mechanical Turk
PaaS: Google App Engine, eyeOS
IaaS: Amazon EC2, EC2 Cluster Compute Instances
 
10. Má»™t cÃ´ng ty khá»Ÿi nghiá»‡p muá»‘n cung cáº¥p dá»‹ch vá»¥ SaaS. CÃ´ng ty cáº§n 20 mÃ¡y chá»§. Má»—i mÃ¡y chá»§ cÃ³ giÃ¡ 5.000 Ä‘Ã´ la, kháº¥u hao trong 10 nÄƒm. CÃ´ng suáº¥t tiÃªu thá»¥ Ä‘iá»‡n trÃªn má»—i phiáº¿n mÃ¡y chá»§: 400 watt. GiÃ¡ Ä‘iá»‡n lÃ  0,24 Ä‘Ã´ la/kWh. Äá»ƒ quáº£n lÃ½ cÃ¡c mÃ¡y chá»§ nÃ y, cáº§n má»™t quáº£n trá»‹ viÃªn, lÆ°Æ¡ng lÃ  2.000 Ä‘Ã´ la/thÃ¡ng. Biáº¿t ráº±ng giÃ¡ thuÃª má»™t mÃ¡y chá»§ áº£o cÃ³ cÃ¹ng cáº¥u hÃ¬nh vá»›i mÃ¡y chá»§ váº­t lÃ½ lÃ  20 Ä‘Ã´ la/thÃ¡ng. TÃ­nh chi phÃ­ cá»§a 2 giáº£i phÃ¡p: CÃ³ mÃ¡y chá»§ chuyÃªn dá»¥ng vÃ  thuÃª mÃ¡y chá»§ áº£o tá»« Ä‘Ã¡m mÃ¢y.
Giáº£i phÃ¡p 1: Mua 20 mÃ¡y chá»§ chuyÃªn dá»¥ng
Kháº¥u hao: 5000*20*10%=10000$
Tiá»n Ä‘iá»‡n: 0,4*0,24*24*365*20=16819,2$
Tiá»n quáº£n trá»‹ viÃªn: 2000*12=24000$
Tá»•ng chi phÃ­ cho 20 mÃ¡y chá»§ chuyÃªn dá»¥ng hÃ ng nÄƒm: 10000+16819,2+24000=50819,2$/nÄƒm
Giáº£i phÃ¡p 2: ThuÃª mÃ¡y áº£o
20*12*20=4800$/nÄƒm
11. Má»™t cÃ´ng ty du lá»‹ch Ä‘ang váº­n hÃ nh 20 mÃ¡y chá»§ web trá»‹ giÃ¡ 5.000 Ä‘Ã´ la/mÃ¡y vá»›i tá»· lá»‡ kháº¥u hao lÃ  10%/nÄƒm. ThÃ´ng thÆ°á»ng, trong nÄƒm, cÃ¡c mÃ¡y chá»§ cháº¡y á»Ÿ má»©c táº£i 20%, chá»‰ trong 3 thÃ¡ng hÃ¨, cÃ¡c mÃ¡y chá»§ cháº¡y á»Ÿ má»©c táº£i 80%. Náº¿u cÃ´ng ty du lá»‹ch nÃ y chuyá»ƒn sang thuÃª mÃ¡y chá»§ áº£o tá»« Ä‘Ã¡m mÃ¢y, chi phÃ­ sáº½ giáº£m bao nhiÃªu láº§n? Biáº¿t ráº±ng giÃ¡ thuÃª mÃ¡y chá»§ áº£o cÃ³ cáº¥u hÃ¬nh tÆ°Æ¡ng Ä‘Æ°Æ¡ng mÃ¡y chá»§ váº­t lÃ½ lÃ  20 Ä‘Ã´ la/thÃ¡ng. VÃ  Ä‘á»ƒ Ä‘áº£m báº£o cháº¥t lÆ°á»£ng dá»‹ch vá»¥, mÃ¡y chá»§ chá»‰ cháº¡y á»Ÿ má»©c táº£i tá»‘i Ä‘a 80%.
Giáº£i phÃ¡p 1: DÃ¹ng mÃ¡y chá»§ web váº­t lÃ½
Chi phÃ­ chá»‰ lÃ  kháº¥u hao: 20*5000*10%=10000$/nÄƒm
Giáº£i phÃ¡p 2: ThuÃª mÃ¡y chá»§ áº£o  
Sá»‘ mÃ¡y chá»§ áº£o Ä‘Æ°á»£c dÃ¹ng trong nÄƒm náº¿u cháº¡y 100% má»©c táº£i: (0,2*9+3*0,8)*20=84(mÃ¡y)
NhÆ°ng mÃ¡y chá»§ chá»‰ cháº¡y má»©c táº£i tá»‘i Ä‘a 80% thÃ¬ 84 mÃ¡y 100% tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i 84/0,8=105 mÃ¡y.
Chi phÃ­ thuÃª lÃ : 105*20=2100$
Chi phÃ­ giáº£m: 10000/2100=4,7 láº§n

Class Q2:
TrÃ¬nh bÃ y khÃ¡i niá»‡m CPU trong mÃ¡y áº£o
MÃ¡y chá»§ khÃ´ng dÃ nh riÃªng CPU Ä‘á»ƒ sá»­ dá»¥ng má»™t mÃ¡y áº£o cá»¥ thá»ƒ; thay vÃ o Ä‘Ã³, khi VM cáº§n xá»­ lÃ½ tÃ i nguyÃªn, trÃ¬nh quáº£n lÃ½ áº£o sáº½ nháº­n yÃªu cáº§u, lÃªn lá»‹ch cÃ¡c hoáº¡t Ä‘á»™ng vÃ  chuyá»ƒn káº¿t quáº£ trá»Ÿ láº¡i VM thÃ´ng qua trÃ¬nh Ä‘iá»u khiá»ƒn thiáº¿t bá»‹ thÃ­ch há»£p.
CPU váº­t lÃ½ â€“ lÃµi
CPU áº£o â€“ vCPU
1 CPU váº­t lÃ½ cÃ³ thá»ƒ Ä‘Æ°á»£c thiáº¿t láº­p Ä‘á»ƒ xá»­ lÃ½ nhiá»u vCPU

2. TrÃ¬nh bÃ y cÃ¡c yÃªu cáº§u vá» láº­p lá»‹ch CPU cho cÃ´ng nghá»‡ mÃ¡y áº£o?
CÃ´ng báº±ng (Fairness): má»—i VM Ä‘Æ°á»£c chia sáº» CPU há»£p lÃ½, trÃ¡nh VM nÃ y chiáº¿m háº¿t.


CÃ¡ch ly (Isolation): VM nÃ y khÃ´ng áº£nh hÆ°á»Ÿng hiá»‡u nÄƒng cá»§a VM khÃ¡c.


Hiá»‡u quáº£ (Efficiency): táº­n dá»¥ng tá»‘i Ä‘a tÃ i nguyÃªn CPU, trÃ¡nh lÃ£ng phÃ­.


QoS (Quality of Service): Ä‘Ã¡p á»©ng SLA (Service Level Agreement), Ä‘áº£m báº£o VM Æ°u tiÃªn cao Ä‘Æ°á»£c phá»¥c vá»¥ trÆ°á»›c.


Kháº£ nÄƒng má»Ÿ rá»™ng (Scalability): váº«n hiá»‡u quáº£ khi sá»‘ lÆ°á»£ng VM lá»›n.
3. TrÃ¬nh bÃ y thuáº­t toÃ¡n vÃ²ng trÃ²n Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ láº­p lá»‹ch CPU
Ã tÆ°á»Ÿng: Set 1 tÆ°á»£ng thá»i gian nhá» (time quantum), má»—i tiáº¿n trÃ¬nh/VM Ä‘Æ°á»£c cáº¥p CPU Ä‘Ãºng báº±ng lÆ°á»£ng thá»i gian time quantum Ä‘Ã³
CÆ¡ cháº¿ hoáº¡t Ä‘á»™ng:
Xáº¿p cÃ¡c VM vÃ o hÃ ng Ä‘á»£i
Láº§n lÆ°á»£t cáº¥p CPU cho tá»«ng VM trong thá»i gian time quantum
Háº¿t time quantum mÃ  chÆ°a xong, VM Ä‘Æ°á»£c Ä‘Æ°a vá» cuá»‘i hÃ ng chá»
4. TrÃ¬nh bÃ y Ã½ tÆ°á»Ÿng cÆ¡ báº£n cá»§a thuáº­t toÃ¡n tÃ­n dá»¥ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ láº­p lá»‹ch CPU
Ã tÆ°á»Ÿng: má»—i VM Ä‘Æ°á»£c cáº¥p 1 giÃ¡ trá»‹ tÃ­n dá»¥ng, lÆ°á»£ng tÃ­n dÃ¹ng cá»§a VM cÃ ng cao thÃ¬ giÃ¡ trá»‹ Æ°u tiÃªn cao vÃ  ngÆ°á»£c láº¡i, sau má»—i khe thá»i gian, VM Ä‘Æ°á»£c sá»­ dá»¥ng CPU sáº½ trá»« 1 Ä‘Æ¡n vá»‹ tÃ­n dá»¥ng, CPU cÃ³ credit (Ä‘á»™ Æ°u tiÃªn) cao hÆ¡n sáº½ Ä‘Æ°á»£c Æ°u tiÃªn sá»­ dá»¥ng CPU
CÆ¡ cháº¿ hoáº¡t Ä‘á»™ng:
Xáº¿p cÃ¡c VM vÃ o hÃ ng Ä‘á»£i, má»—i VM Ä‘Æ°á»£c cáº¥p giÃ¡ trá»‹ credit lÃ  nhÆ° nhau
Láº§n lÆ°á»£t cáº¥p CPU cho tá»«ng VM, sau khi cháº¡y háº¿t timeslice, VM bá»‹ trá»« 1 Ä‘Æ¡n vá»‹ tÃ­n dá»¥ng, náº¿u chÆ°a xong -> Ä‘Æ°á»£c xáº¿p vÃ o cuá»‘i hÃ ng chá»
Tiáº¿p theo,sáº½ Ä‘Æ°a vÃ o VM trong local queue vá»›i má»©c Ä‘á»™ Æ°u tiÃªn cao, náº¿u khÃ´ng, cháº¡y VM á»Ÿ queue khÃ¡c vá»›i má»©c Ä‘á»™ Æ°u tiÃªn cao, VM   trong queue vá»›i má»©c Ä‘á»™ Æ°u tiÃªn tháº¥p hÆ¡n hoáº·c VM trong queue khÃ¡c vá»›i Má»©c Æ°u tiÃªn theo thá»©c tá»±


 Class Q3:
1. NÃªu khÃ¡i niá»‡m cÆ¡ báº£n vá» áº£o hÃ³a bá»™ nhá»›
áº¢o hÃ³a bá»™ nhá»› lÃ  ká»¹ thuáº­t trong há»‡ thá»‘ng áº£o hÃ³a, cho phÃ©p nhiá»u mÃ¡y áº£o sá»­ dá»¥ng chung tÃ i nguyÃªn bá»™ nhá»› váº­t lÃ½. Hypervisor táº¡o ra khÃ´ng gian bá»™ nhá»› áº£o riÃªng cho tá»«ng mÃ¡y áº£o, Ã¡nh xáº¡ nÃ³ tá»›i bá»™ nhá»› váº­t lÃ½, giÃºp cÃ¡c mÃ¡y áº£o hoáº¡t Ä‘á»™ng nhÆ° thá»ƒ chÃºng cÃ³ bá»™ nhá»› Ä‘á»™c láº­p
2. Táº¡i sao chÃºng ta cáº§n gá»i láº¡i bá»™ nhá»›?
Äá»™ng lá»±c chÃ­nh: do hiá»‡n tÆ°á»£ng cung cáº¥p quÃ¡ má»©c (overcommitment) â€” tá»•ng bá»™ nhá»› Ä‘Æ°á»£c gÃ¡n cho cÃ¡c mÃ¡y áº£o lá»›n hÆ¡n bá»™ nhá»› váº­t lÃ½ thá»±c táº¿.
Cáº§n gá»i láº¡i bá»™ nhá»› Ä‘á»ƒ:


Sá»­ dá»¥ng bá»™ nhá»› hiá»‡u quáº£ hÆ¡n.


TÄƒng tá»· lá»‡ tÃ­ch há»£p (cháº¡y nhiá»u mÃ¡y áº£o trÃªn cÃ¹ng 1 mÃ¡y chá»§).


Äáº£m báº£o hiá»‡u nÄƒng vÃ  phÃ¢n phá»‘i cÃ´ng báº±ng tÃ i nguyÃªn khi bá»™ nhá»› khan hiáº¿m
3. Ká»ƒ tÃªn 3 ká»¹ thuáº­t gá»i láº¡i bá»™ nhá»› phá»• biáº¿n
Chia sáº» Trang Trong Suá»‘t (Transparent Page Sharing â€“ TPS): loáº¡i bá» cÃ¡c trang trÃ¹ng láº·p.
TÄƒng Ã¡p lá»±c bá»™ nhá»› giáº£ táº¡o bÃªn trong VM: Ã©p mÃ¡y áº£o giáº£i phÃ³ng bá»™ nhá»›.
HoÃ¡n Ä‘á»•i Hypervisor (Hypervisor swapping): hypervisor trá»±c tiáº¿p swap bá»™ nhá»› VM ra Ä‘Ä©a.

4. NÃªu cÆ¡ cháº¿ hoáº¡t Ä‘á»™ng cá»§a ká»¹ thuáº­t gá»i láº¡i bá»™ nhá»› chia sáº» trang trong suá»‘t.
Khi nhiá»u mÃ¡y áº£o cÃ¹ng cháº¡y, má»™t sá»‘ trang bá»™ nhá»› cÃ³ ná»™i dung giá»‘ng há»‡t nhau (vÃ­ dá»¥ cÃ¹ng há»‡ Ä‘iá»u hÃ nh, á»©ng dá»¥ng).
Hypervisor nháº­n diá»‡n cÃ¡c trang giá»‘ng nhau thÃ´ng qua thuáº­t toÃ¡n (hashing) â†’ chá»‰ giá»¯ má»™t báº£n duy nháº¥t trong RAM.
CÃ¡c mÃ¡y áº£o khÃ¡c trá» tá»›i trang dÃ¹ng chung nÃ y.
Náº¿u má»™t mÃ¡y áº£o cáº§n ghi dá»¯ liá»‡u khÃ¡c vÃ o trang (write), hypervisor sáº½ táº¡o báº£n sao riÃªng (Copy-on-Write)
5. Khi nÃ o ká»¹ thuáº­t chia sáº» trang trong suá»‘t khÃ´ng hiá»‡u quáº£?
Khi cÃ¡c mÃ¡y áº£o cháº¡y á»©ng dá»¥ng/dá»¯ liá»‡u khÃ¡c nhau â†’ Ã­t trang trÃ¹ng láº·p.


Khi bá»™ nhá»› cá»§a VM liÃªn tá»¥c thay Ä‘á»•i (nhiá»u thao tÃ¡c ghi), lÃ m TPS pháº£i copy liÃªn tá»¥c â†’ giáº£m hiá»‡u quáº£.


Vá»›i dá»¯ liá»‡u ngáº«u nhiÃªn hoáº·c mÃ£ hÃ³a (mÃ£ hÃ³a, nÃ©n sáºµn), kháº£ nÄƒng trÃ¹ng láº·p gáº§n nhÆ° báº±ng 0.

Class Q4:
1. Trong cÃ´ng nghá»‡ mÃ¡y áº£o, máº¡ng ná»™i bá»™ lÃ  gÃ¬?
LÃ  máº¡ng áº£o Ä‘Æ°á»£c táº¡o ra giá»¯a cÃ¡c mÃ¡y áº£o (VM) trong cÃ¹ng má»™t host hoáº·c cÃ¹ng má»™t nhÃ³m host.
CÃ¡c NIC áº£o (Virtual Interface â€“ VIF) cá»§a mÃ¡y áº£o Ä‘Æ°á»£c káº¿t ná»‘i vá»›i switch áº£o, táº¡o thÃ nh má»™t máº¡ng cá»¥c bá»™ riÃªng.
Chá»‰ cÃ¡c mÃ¡y áº£o cÃ¹ng trong máº¡ng ná»™i bá»™ má»›i giao tiáº¿p Ä‘Æ°á»£c vá»›i nhau.
KhÃ´ng cÃ³ káº¿t ná»‘i ra ngoÃ i host váº­t lÃ½ hay Internet.

2. Trong cÃ´ng nghá»‡ mÃ¡y áº£o, máº¡ng ngoÃ i lÃ  gÃ¬?
Khi gáº¯n thÃªm NIC áº£o vÃ o NIC váº­t lÃ½ (PIF) cá»§a mÃ¡y chá»§, máº¡ng ná»™i bá»™ sáº½ trá»Ÿ thÃ nh máº¡ng ngoÃ i.
CÃ¡c mÃ¡y áº£o cÃ³ thá»ƒ giao tiáº¿p khÃ´ng chá»‰ vá»›i nhau mÃ  cÃ²n vá»›i máº¡ng bÃªn ngoÃ i host (LAN váº­t lÃ½ hoáº·c Internet).
VM khi gá»­i dá»¯ liá»‡u ra ngoÃ i sáº½ dÃ¹ng IP cá»§a VM, nhÆ°ng MAC Ä‘Ã­ch lÃ  cá»§a router/gateway. Switch áº£o sáº½ chuyá»ƒn tiáº¿p qua PIF (NIC tháº­t).
NIC váº­t lÃ½ cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng á»Ÿ cháº¿ Ä‘á»™ há»—n táº¡p (promiscuous) Ä‘á»ƒ xá»­ lÃ½ má»i frame.

Class Q5
1. ÄÄ©a áº£o lÃ  gÃ¬?
ÄÄ©a áº£o lÃ  má»™t tá»‡p váº­t lÃ½ lá»›n hoáº·c táº­p há»£p cÃ¡c tá»‡p, dÃ¹ng Ä‘á»ƒ lÆ°u HÄH, chÆ°Æ¡ng trÃ¬nh, dá»¯ liá»‡u cá»§a mÃ¡y áº£o.
ÄÄ©a áº£o cÃ³ thá»ƒ sao chÃ©p, di chuyá»ƒn, lÆ°u trá»¯, sao lÆ°u nhÆ° file bÃ¬nh thÆ°á»ng.
2. Liá»‡t kÃª cÃ¡c thÃ nh pháº§n chÃ­nh cá»§a áº£o hÃ³a lÆ°u trá»¯.
MÃ¡y áº£o (VM) â€“ gá»­i lá»‡nh SCSI.
ÄÄ©a áº£o (Virtual Disk) â€“ náº±m trÃªn datastore.
Datastore â€“ cháº¡y trÃªn thiáº¿t bá»‹ lÆ°u trá»¯ váº­t lÃ½.
Thiáº¿t bá»‹ lÆ°u trá»¯ váº­t lÃ½ (local disk, SAN, NAS...).
HBA â€“ Host Bus Adapter â€“ giao diá»‡n káº¿t ná»‘i giá»¯a mÃ¡y chá»§ vÃ  thiáº¿t bá»‹ lÆ°u trá»¯.
3. Liá»‡t kÃª cÆ¡ cháº¿ hoáº¡t Ä‘á»™ng cá»§a lÆ°u trá»¯ cá»¥c bá»™
MÃ¡y chá»§ chá»‰ sá»­ dá»¥ng má»™t káº¿t ná»‘i duy nháº¥t Ä‘áº¿n á»• Ä‘Ä©a.
KhÃ´ng cÃ³ máº¡ng lÆ°u trá»¯ riÃªng, chá»‰ gáº¯n trá»±c tiáº¿p vÃ o server.
Dá»… táº¡o Ä‘iá»ƒm lá»—i Ä‘Æ¡n (SPOF) â†’ gÃ¢y máº¥t dá»¯ liá»‡u khi há»ng káº¿t ná»‘i.
4. Liá»‡t kÃª cÆ¡ cháº¿ hoáº¡t Ä‘á»™ng cá»§a lÆ°u trá»¯ máº¡ng
Thiáº¿t bá»‹ lÆ°u trá»¯ Ä‘Æ°á»£c chia sáº» qua máº¡ng.
Nhiá»u mÃ¡y chá»§ truy cáº­p Ä‘á»“ng thá»i vÃ o dá»¯ liá»‡u.
CÃ³ nhiá»u cÃ´ng nghá»‡: Virtual SAN, Fibre Channel, iSCSIâ€¦
5. Liá»‡t kÃª cÃ¡c thÃ nh pháº§n cá»§a SAN (Máº¡ng lÆ°u trá»¯ khu vá»±c)
ThÃ nh pháº§n mÃ¡y chá»§ (Server side):
MÃ¡y chá»§ (Host).
HBA â€“ Host Bus Adapter.
CÃ¡p káº¿t ná»‘i (cÃ¡p quang).
ThÃ nh pháº§n máº¡ng (Fabric):
CÃ¡c switch Fibre Channel.
ThÃ nh pháº§n lÆ°u trá»¯ (Storage side):
Máº£ng lÆ°u trá»¯ (Disk Array).
Thiáº¿t bá»‹ lÆ°u trá»¯ bÄƒng (Tape Library)
6. Bá»™ Ä‘iá»u há»£p Bus mÃ¡y chá»§ lÃ  gÃ¬?
HBA lÃ  Host Bus Adapter, gáº¯n trong mÃ¡y chá»§.
DÃ¹ng Ä‘á»ƒ chuyá»ƒn Ä‘á»•i tÃ­n hiá»‡u sá»‘ sang tÃ­n hiá»‡u quang, Ä‘Ã³ng gÃ³i dá»¯ liá»‡u theo Fibre Channel vÃ  gá»­i lÃªn SAN.
LÃ  giao diá»‡n káº¿t ná»‘i chÃ­nh giá»¯a mÃ¡y chá»§ vÃ  máº¡ng SAN
7. Cáº¥u trÃºc (Fabric) cá»§a SAN lÃ  gÃ¬?
Fabric lÃ  máº¡ng lÆ°á»›i Ä‘Æ°á»£c táº¡o khi má»™t hoáº·c nhiá»u switch SAN káº¿t ná»‘i vá»›i nhau.
LÃ  pháº§n máº¡ng thá»±c sá»± cá»§a SAN.
DÃ¹ng giao thá»©c Fibre Channel Ä‘á»ƒ truyá»n dá»¯ liá»‡u.
CÃ³ thá»ƒ káº¿t ná»‘i nhiá»u fabric trong má»™t SAN.
8. Thiáº¿t káº¿ má»™t há»‡ thá»‘ng SAN chuyá»ƒn máº¡ch FC cho cáº¥u hÃ¬nh sau
Sá»‘ mÃ¡y chá»§ = 10. Má»—i mÃ¡y chá»§ cÃ³ 1 cá»•ng HBA.
Sá»‘ máº£ng lÆ°u trá»¯ = 2. Má»—i máº£ng cÃ³ 2 cá»•ng giao tiáº¿p.
CÃ¡c thÃ nh pháº§n chuyá»ƒn máº¡ch (SAN switch) 16 cá»•ng

9. Thiáº¿t káº¿ má»™t há»‡ thá»‘ng SAN chuyá»ƒn máº¡ch FC cho cáº¥u hÃ¬nh sau
Sá»‘ mÃ¡y chá»§ = 20. Má»—i mÃ¡y chá»§ cÃ³ 1 cá»•ng HBA.
Sá»‘ máº£ng lÆ°u trá»¯ = 2. Má»—i máº£ng cÃ³ 4 cá»•ng giao tiáº¿p.
Thiáº¿t bá»‹ chuyá»ƒn máº¡ch SAN 16 cá»•ng

10. Má»™t tá»• chá»©c muá»‘n xÃ¢y dá»±ng má»™t trung tÃ¢m dá»¯ liá»‡u áº£o hÃ³a sá»­ dá»¥ng cÃ´ng nghá»‡ lÆ°u trá»¯ SAN Ä‘áº§y Ä‘á»§ (táº¥t cáº£ cÃ¡c thiáº¿t bá»‹ chuyá»ƒn máº¡ch Ä‘Æ°á»£c káº¿t ná»‘i vá»›i táº¥t cáº£ cÃ¡c thiáº¿t bá»‹ chuyá»ƒn máº¡ch trong cáº¥u hÃ¬nh fabric). Sau Ä‘Ã¢y lÃ  thÃ´ng sá»‘ ká»¹ thuáº­t cá»§a mÃ¡y chá»§, há»‡ thá»‘ng lÆ°u trá»¯ vÃ  thiáº¿t bá»‹ chuyá»ƒn máº¡ch Ä‘Æ°á»£c sá»­ dá»¥ng trong thiáº¿t káº¿:
Sá»‘ lÆ°á»£ng mÃ¡y chá»§ = 30. Má»—i mÃ¡y chá»§ cÃ³ hai cá»•ng HBA.
Sá»‘ lÆ°á»£ng máº£ng lÆ°u trá»¯ = 4. Má»—i máº£ng cÃ³ tÃ¡m cá»•ng giao tiáº¿p.
CÃ¡c thÃ nh pháº§n chuyá»ƒn máº¡ch (thiáº¿t bá»‹ chuyá»ƒn máº¡ch SAN):
Thiáº¿t bá»‹ chuyá»ƒn máº¡ch mÃ´-Ä‘un FC vá»›i 16 cá»•ng. Sá»‘ lÆ°á»£ng cá»•ng trong má»™t thiáº¿t bá»‹ chuyá»ƒn máº¡ch cÃ³ thá»ƒ tÄƒng lÃªn 32 cá»•ng báº±ng cÃ¡ch thÃªm cÃ¡c card cá»•ng bá»• sung. Má»—i card cá»•ng cÃ³ 8 cá»•ng.
Pháº£i cÃ³ Ã­t nháº¥t hai liÃªn káº¿t liÃªn thiáº¿t bá»‹ chuyá»ƒn máº¡ch (ISL) giá»¯a hai thiáº¿t bá»‹ chuyá»ƒn máº¡ch báº¥t ká»³ Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh kháº£ dá»¥ng cao.

Cáº§n tá»‘i thiá»ƒu bao nhiÃªu thiáº¿t bá»‹ chuyá»ƒn máº¡ch Ä‘á»ƒ Ä‘Ã¡p á»©ng cÃ¡c yÃªu cáº§u Ä‘Ã£ cho? Äiá»u chá»‰nh sá»‘ lÆ°á»£ng cá»•ng trong má»—i thiáº¿t bá»‹ chuyá»ƒn máº¡ch FC Ä‘á»ƒ tá»‘i Æ°u hÃ³a chi phÃ­.
Giáº£i:
- VÃ¬ cÃ¡c switch liÃªn káº¿t vá»›i cÃ¡c switch khÃ¡c báº±ng liÃªn káº¿t fabric-> liÃªn káº¿t giá»¯a cÃ¡c switch lÃ  1 Ä‘á»“ thá»‹ Ä‘áº§y Ä‘á»§-> Sá»‘ liÃªn káº¿t giá»¯a cÃ¡c switch lÃ : (n*(n-1))/2
Cáº§n Ã­t nháº¥t 2 liÃªn káº¿t chuyá»ƒn máº¡ch (ISL) mÃ  má»—i liÃªn káº¿t cáº§n 2 cá»•ng
-> Tá»•ng sá»‘ cá»•ng cáº§n thiáº¿t cho liÃªn káº¿t cÃ¡c switch lÃ  2*2*(n*(n-1)/2)= 2n*(n-1)
-Sá»‘ cá»•ng cáº§n cho mÃ¡y chá»§: 30*2=60
Sá»‘ cá»•ng cáº§n cho máº£ng lÆ°u trá»¯ lÃ : 4*8=32
Tá»•ng cá»‘ cá»•ng cáº§n lÃ : 60+32+2n*(n-1)= 92+ 2n(n-1)
-Thiáº¿t bá»‹ chuyá»ƒn máº¡ch FC cÃ³ 16 cá»•ng cÃ³ thá»ƒ tÄƒng lÃªn 32 cá»•ng vá»›i card 8 cá»•ng-> max sá»‘ cá»•ng trong 1 switch  gá»“m thiáº¿t bá»‹ FC 16 cá»•ng + 2 card 8 cá»•ng= 32 cá»•ng
->Tá»•ng sá»‘ cá»•ng cÃ³ lÃ : 32n
-Ta cÃ³: 32*n  92+ 2n(n-1)
â‡” 2n^2- 34n+920
â‡” 3,37n13,62
=> Sá»‘ switch tá»‘i thiá»ƒu lÃ  n=4
-Ta cÃ³: 
Tá»•ng cá»•ng tá»‘i Ä‘a: 32Ã—4=128
Cá»•ng ISL: 2Ã—4Ã—(4âˆ’1)=24.
Cá»•ng cÃ²n láº¡i cho mÃ¡y chá»§ vÃ  máº£ng lÆ°u trá»¯ 128âˆ’24=104
Sá»‘ cá»•ng cÃ²n dÆ° lÃ : 104-92=12 cá»•ng
->CÃ³ thá»ƒ bá»›t 1 card 8 cá»™ng
Váº­y cáº§n 4 switch vÃ  7 card 8 cá»•ng
Class Q6
Hadoop lÃ  gÃ¬?
Hadoop lÃ  khung pháº§n má»m mÃ£ nguá»“n má»Ÿ (thuá»™c Apache) Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ lÆ°u trá»¯ vÃ  xá»­ lÃ½ dá»¯ liá»‡u quy mÃ´ lá»›n trÃªn cá»¥m nhiá»u mÃ¡y tÃ­nh thÃ´ng thÆ°á»ng.
ÄÆ°á»£c Yahoo phÃ¡t triá»ƒn dá»±a trÃªn Ã½ tÆ°á»Ÿng tá»« Google.
Cá»‘t lÃµi gá»“m:
HDFS â€“ há»‡ thá»‘ng file phÃ¢n tÃ¡n
MapReduce â€“ mÃ´ hÃ¬nh láº­p trÃ¬nh xá»­ lÃ½ dá»¯ liá»‡u lá»›n

NÃªu kiáº¿n trÃºc Hadoop nguyÃªn thá»§y
HDFS há»‡ thá»‘ng tá»‡p phÃ¢n tÃ¡n.
MapReduce mÃ´ hÃ¬nh láº­p trÃ¬nh phÃ¢n tÃ¡n
CÃ¡c cÃ´ng cá»¥ cáº£i thiá»‡n kháº£ nÄƒng láº­p trÃ¬nh, truy cáº­p dá»¯ liá»‡u

HDFS lÃ  gÃ¬?

HDFS lÃ  viáº¿t táº¯t cá»§a Hadoop Distributed File System, lÃ  má»™t há»‡ thá»‘ng lÆ°u trá»¯ dá»¯ liá»‡u phÃ¢n tÃ¡n Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ lÆ°u trá»¯ vÃ  quáº£n lÃ½ khá»‘i lÆ°á»£ng dá»¯ liá»‡u lá»›n trÃªn nhiá»u mÃ¡y chá»§. HDFS Ä‘áº£m báº£o Ä‘á»™ tin cáº­y, kháº£ nÄƒng chá»‹u lá»—i vÃ  kháº£ nÄƒng má»Ÿ rá»™ng, cho phÃ©p xá»­ lÃ½ dá»¯ liá»‡u lá»›n hiá»‡u quáº£ báº±ng cÃ¡ch phÃ¢n tÃ¡n dá»¯ liá»‡u vÃ  tÃ­nh toÃ¡n song song. Há»‡ thá»‘ng nÃ y sá»­ dá»¥ng kiáº¿n trÃºc NameNode vÃ  DataNode Ä‘á»ƒ triá»ƒn khai, cung cáº¥p kháº£ nÄƒng truy cáº­p vá»›i hiá»‡u suáº¥t cao Ä‘áº¿n cÃ¡c dá»¯ liá»‡u trÃªn cÃ¡c cá»¥m cá»§a Hadoop

Trong HDFS, data node lÃ  gÃ¬?
Chá»‰ cáº§n lÆ°u trá»¯ vÃ  truy xuáº¥t cÃ¡c khá»‘i khi chÃºng Ä‘Æ°á»£c yÃªu cáº§u (bá»Ÿi khÃ¡ch hÃ ng hoáº·c nÃºt tÃªn). Trong ná»™i bá»™, má»™t tá»‡p Ä‘Æ°á»£c chia thÃ nh má»™t hoáº·c nhiá»u khá»‘i vÃ  cÃ¡c khá»‘i nÃ y Ä‘Æ°á»£c lÆ°u trá»¯ trong má»™t táº­p há»£p cÃ¡c nÃºt dá»¯ liá»‡u.

Trong HDFS, name node lÃ  gÃ¬?
Quáº£n lÃ½ cÃ¢y há»‡ thá»‘ng tá»‡p vÃ  siÃªu dá»¯ liá»‡u cho táº¥t cáº£ cÃ¡c tá»‡p vÃ  thÆ° má»¥c
Biáº¿t cÃ¡c nÃºt dá»¯ liá»‡u mÃ  trÃªn Ä‘Ã³ náº±m táº¥t cáº£ cÃ¡c khá»‘i cho má»™t tá»‡p nháº¥t Ä‘á»‹nh

Táº¡i sao trong HDFS, kÃ­ch thÆ°á»›c block thÆ°á»ng ráº¥t lá»›n?
Äá»ƒ lÃ m cho metadata nhá», quáº£n lÃ½ dá»… dÃ ng, truy cáº­p nhanh hÆ¡n.

NÃªu cÆ¡ cháº¿ thá»±c hiá»‡n Ä‘á»c HDFS 
á»¨ng dá»¥ng khÃ¡ch muá»‘n Ä‘á»c má»™t tá»‡p (hoáº·c má»™t pháº§n trong Ä‘Ã³) pháº£i trÆ°á»›c tiÃªn liÃªn há»‡ vá»›i nÃºt tÃªn Ä‘á»ƒ xÃ¡c Ä‘á»‹nh nÆ¡i dá»¯ liá»‡u thá»±c Ä‘Æ°á»£c lÆ°u trá»¯
ÄÃ¡p láº¡i yÃªu cáº§u cá»§a khÃ¡ch hÃ ng, nÃºt tÃªn tráº£ vá»:
id khá»‘i liÃªn quan
vá»‹ trÃ­ nÆ¡i cÃ¡c khá»‘i Ä‘Æ°á»£c giá»¯ (tá»©c lÃ  cÃ¡c nÃºt dá»¯ liá»‡u)
Sau Ä‘Ã³ mÃ¡y khÃ¡ch liÃªn há»‡ vá»›i cÃ¡c nÃºt dá»¯ liá»‡u Ä‘á»ƒ láº¥y dá»¯ liá»‡u
NÃªu cÆ¡ cháº¿ thá»±c hiá»‡n ghi HDFS
dá»¯ liá»‡u khÃ´ng bao giá» Ä‘Æ°á»£c di chuyá»ƒn qua nÃºt tÃªn
táº¥t cáº£ chuyá»ƒn dá»¯ liá»‡u xáº£y ra trá»±c tiáº¿p giá»¯a mÃ¡y khÃ¡ch vÃ  nÃºt dá»¯ liá»‡u
giao tiáº¿p vá»›i nÃºt tÃªn chá»‰ liÃªn quan Ä‘áº¿n viá»‡c chuyá»ƒn siÃªu dá»¯ liá»‡u
Má»™t há»‡ thá»‘ng HDFS cÃ³ há»‡ sá»‘ sao chÃ©p (replication factor) lÃ  4, kÃ­ch thÆ°á»›c block lÃ  128MB. Client ghi 1 file cÃ³ kÃ­ch thÆ°á»›c 1.2GB vÃ o há»‡ thá»‘ng HDFS.
TÃ­nh sá»‘ block Ä‘á»ƒ chá»©a file Ä‘Ã³
TÃ­nh kÃ­ch thÆ°á»›c khÃ´ng gian lÆ°u trá»¯ HDFS dÃ¹ng Ä‘á»ƒ chá»©a file Ä‘Ã³
TÃ­nh lÆ°á»£ng dá»¯ liá»‡u truyá»n trÃªn máº¡ng khi thá»±c hiá»‡n ghi file Ä‘Ã³
Giáº£i
Sá»‘ block Ä‘á»ƒ chá»©a 1,2GB  lÃ : 1200/128=9,375.-> cáº§n 10 block
VÃ¬ há»‡ sá»‘ sao chÃ©p lÃ  4 nÃªn sá»‘ block Ä‘á»ƒ chá»©a file lÃ : 10 * 4 = 40 block
Má»—i block lÆ°u Ä‘Æ°á»£c 4 báº£n replication
Dung lÆ°á»£ng dÃ¹ng: 10* 128*4=5120MB
Khi client ghi file vÃ o datanode 1,2 GB sáº½ Ä‘Æ°á»£c truyá»n vÃ o. CÃ³ 4 báº£n sao cÃ³ datanode nÃªn sáº½ cÃ³ 4 láº§n ghi. Khi Ä‘Ã³ lÆ°á»£ng dá»¯ liá»‡u truyá»n trÃªn máº¡ng khi thá»±c hiá»‡n khi file trÃªn lÃ : 1,2 * 1024 * 4 = 4915.2 MB
Má»™t há»‡ thá»‘ng HDFS cÃ³ há»‡ sá»‘ sao chÃ©p (replication factor) lÃ  3, kÃ­ch thÆ°á»›c block lÃ  128MB. 1 file test.txt kÃ­ch thÆ°á»›c 640 MB Ä‘Æ°á»£c lÆ°u nhÆ° sau

CÃ¡c datanode vÃ  client Ä‘Æ°á»£c ná»‘i vá»›i nhau qua switch 1Gbps. Tá»‘c Ä‘á»™ Ä‘á»c/ghi Ä‘Ä©a cá»©ng cá»§a Datanode lÃ  40MB/s.  HÃ£y tÃ­nh thá»i gian nhá» nháº¥t cÃ³ thá»ƒ Ä‘á»ƒ client Ä‘á»c file test.txt tá»« há»‡ thá»‘ng nÃ y.
Giáº£i: 
Tá»‘c Ä‘á»™ Ä‘á»c ghi Ä‘Ä©a cá»©ng 40MB/s
Tá»‘c Ä‘á»™ Ä‘á»c trÃªn switch 1Gbps=128MB/s
	Sá»‘ block=640/128=5 block
Thá»i gian truyá»n qua switch T1=640 /128=5s
VÃ¬ 4 node cháº¡y song song nÃªn thá»i gian tá»‘i thiá»ƒu Ä‘á»c 5 block lÃ  T2=128*2/40=6,4s
Váº­y thá»i gian nhá» nháº¥t lÃ  max(T1,T2)=6,4s
Má»™t há»‡ thá»‘ng HDFS cÃ³ há»‡ sá»‘ sao chÃ©p (replication factor) lÃ  4, kÃ­ch thÆ°á»›c block lÃ  128MB. Client ghi 1 file test.txt cÃ³ kÃ­ch thÆ°á»›c 1.2GB vÃ o há»‡ thá»‘ng HDFS. Má»—i block Ä‘Æ°á»£c ghi trÃªn cÃ¡c datanode khÃ¡c nhau. CÃ¡c datanode vÃ  client Ä‘Æ°á»£c ná»‘i vá»›i nhau qua switch 1Gbps. Tá»‘c Ä‘á»™ Ä‘á»c/ghi Ä‘Ä©a cá»©ng cá»§a Datanode lÃ  40MB/s.  HÃ£y tÃ­nh thá»i gian nhá» nháº¥t cÃ³ thá»ƒ Ä‘á»ƒ client ghi file test.txt vÃ o há»‡ thá»‘ng nÃ y.
Client gá»­i file vÃ o máº¡ng vÃ o node 1(bÆ°á»›c nÃ y phá»¥ thuá»™c vÃ o tá»‘c Ä‘á»™ máº¡ng) -> Node1 ghi vÃ o -> tá»« node1 nÃ³ truyá»n sang node 2-> sang node 3 cho tá»›i khi Ä‘á»§ 4 báº£n sao chÃ©p (t hiá»ƒu lÃ  tháº¿)
KÃ­ch thÆ°á»›c file 1228.8MB => cáº§n 10 block 128MB (tháº¿ thÃ¬ tÃ­nh cÃ¡i block nÃ y lÃ m gÃ¬ nhiÂ·
T1=1200/128=9,4s (thá»i gian gá»­i file vÃ o máº¡ng) 
T21=128/40=3,2s (thá»i gian ghi tá»« block ra data node)
Tswitch=128/128=1s 
T22=T23=T24=max(Tswitch, datanode)=3,2s
Do cáº§n ghi xong node 1 rá»“i má»›i sang node 2 rá»“i sang node 3-> 4=>T2=3,2*4=12,8s
Váº­y Ä‘á»ƒ client Ä‘á»c háº¿t file cáº§n Ã­t nháº¥t max(T1,T2)=12,8s

LÃ m láº¡i
Thá»i gian Ä‘á»ƒ client gá»­i file tá»›i máº¡ng lÃ : T1 = 1228.8/125 = 9.8s

Class Q7
Thuáº­t toÃ¡n MapReduce thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng cho cÃ¡c dáº¡ng bÃ i toÃ¡n nÃ o?
Láº·p láº¡i song song má»™t sá»‘ lÆ°á»£ng lá»›n cÃ¡c báº£n ghi
TrÃ­ch xuáº¥t má»™t cÃ¡i gÃ¬ Ä‘Ã³ quan tÃ¢m tá»« má»—i láº§n láº·p láº¡i
NÃªu cÃ¡c thÃ nh pháº§n cÆ¡ báº£n cá»§a thuáº­t toÃ¡n MapReduce.
Map: nháº­n Ä‘áº§u vÃ o má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ khÃ³a (k, v) vÃ  tráº£ vá» má»™t loáº¡t cÃ¡c cáº·p khÃ³a-giÃ¡ trá»‹: (k1, v1), (k2, v2),â€¦, (kn, vn)
Khung chá»©c nÄƒng táº­p há»£p táº¥t cáº£ cÃ¡c cáº·p cÃ³ cÃ¹ng khÃ³a k vÃ  liÃªn káº¿t vá»›i k táº¥t cáº£ cÃ¡c giÃ¡ trá»‹ cá»§a k: (k, [v1, .., vn])
Reduce: nháº­n Ä‘áº§u vÃ o lÃ  khÃ³a vÃ  danh sÃ¡ch cÃ¡c giÃ¡ trá»‹ (k, [v1, .., vn]) vÃ  káº¿t há»£p chÃºng báº±ng cÃ¡ch nÃ o Ä‘Ã³.
NÃªu cÆ¡ cháº¿ hoáº¡t Ä‘á»™ng cá»§a thuáº­t toÃ¡n MapReduce.
Map -> Láº·p láº¡i song song má»™t sá»‘ lÆ°á»£ng lá»›n cÃ¡c báº£n ghiS
TrÃ­ch xuáº¥t má»™t cÃ¡i gÃ¬ Ä‘Ã³ quan tÃ¢m tá»« má»—i láº§n láº·p láº¡i
Trá»™n vÃ  sáº¯p xáº¿p cÃ¡c káº¿t quáº£ trung gian cá»§a cÃ¡c káº¿t quáº£ khÃ¡c nhau cá»§a sá»± láº·p láº¡i Ä‘á»“ng thá»i
Tá»•ng há»£p káº¿t quáº£ trung gian
Táº¡o Ä‘áº§u ra cuá»‘i cÃ¹ng -> Reduce lÃªn cÃ¡i q m gÃ 


Class Q8
A trong CAP lÃ  gÃ¬?
Kháº£ dá»¥ng (Availability)
Há»‡ thá»‘ng váº«n hoáº¡t Ä‘á»™ng khi bá»‹ lá»—i Ä‘iá»ƒm giao
Táº¥t cáº£ cÃ¡c khÃ¡ch hÃ ng luÃ´n cÃ³ thá»ƒ Ä‘á»c vÃ  viáº¿t
C trong CAP lÃ  gÃ¬?
TÃ­nh nháº¥t quÃ¡n (Consistency)
Táº¥t cáº£ cÃ¡c báº£n sao Ä‘á»u chá»©a cÃ¹ng má»™t phiÃªn báº£n dá»¯ liá»‡u
KhÃ¡ch hÃ ng luÃ´n cÃ³ cÃ¹ng cÃ¡i nhÃ¬n vá» dá»¯ liá»‡u (báº¥t ká»ƒ nÃºt nÃ o)
P trong CAP lÃ  gÃ¬?
Chá»‹u lá»—i phÃ¢n vÃ¹ng (Partition tolerance)
nhiá»u Ä‘iá»ƒm truy cáº­p
Há»‡ thá»‘ng váº«n hoáº¡t Ä‘á»™ng trÃªn há»‡ thá»‘ng bá»‹ phÃ¢n chia (sá»± cá»‘ vá» truyá»n thÃ´ng)
Há»‡ thá»‘ng hoáº¡t Ä‘á»™ng tá»‘t trÃªn toÃ n bá»™ phÃ¢n vÃ¹ng máº¡ng váº­t lÃ½
Mongodb á»©ng vá»›i Ä‘áº·c Ä‘iá»ƒm nÃ o trong CAP? CP
NÃªu mÃ´ hÃ¬nh triá»ƒn khai mongoDB
Shard (Replica Set) â€“ nÆ¡i lÆ°u dá»¯ liá»‡u thá»±c.


Config Server (Replica Set) â€“ lÆ°u metadata.


Mongos Router â€“ Ä‘á»‹nh tuyáº¿n truy váº¥n.

CÆ¡ cháº¿ ghi cá»§a mongoDB trong cháº¿ Ä‘á»™ máº·c Ä‘á»‹nh w:majority nhÆ° tháº¿ nÃ o?
MongoDB vá»›i writeConcern: { w: "majority" } (máº·c Ä‘á»‹nh) ghi theo cÆ¡ cháº¿:

Ghi Ä‘Æ°á»£c xÃ¡c nháº­n chá»‰ khi Ä‘a sá»‘ (majority) cÃ¡c node trong Replica Set Ä‘Ã£ ghi xong vÃ o journal.

Cá»¥ thá»ƒ:

Primary ghi dá»¯ liá»‡u â†’ ghi vÃ o journal.

Primary gá»­i oplog entry cho Secondary.

Khi > 50% sá»‘ node (bao gá»“m Primary) Ä‘Ã£ ghi (commit) vÃ o journal, Primary má»›i tráº£ vá» thÃ nh cÃ´ng cho client.

=> Äáº£m báº£o dá»¯ liá»‡u an toÃ n, khÃ´ng máº¥t khi Primary failover.


Má»™t há»‡ thá»‘ng Mongodb cÃ³ 3 shard, dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ bá»™i 3, router dá»± phÃ²ng bá»™i 2. Cáº§n bao nhiÃªu server cho há»‡ thá»‘ng nÃ y?
Giáº£i:
	3 shard(lÆ°u trá»¯ bá»™i 3)
Shard: dá»¯ liá»‡u Ä‘Æ°á»£c phÃ¢n nhá» trÃªn nhiá»u mÃ¡y chá»§, má»—i pháº§n dá»¯ liá»‡u phÃ¢n tÃ¡n Ä‘Æ°á»£c gá»i lÃ  shard
Router: lÃ  giao diá»‡n mÃ  client káº¿t ná»‘i vÃ o, router biáº¿t dá»¯ liá»‡u client cáº§n tÃ¬m Ä‘á»ƒ á»Ÿ shard nÃ o vÃ  Ä‘á»‹nh tuyáº¿n cÃ¡c thao tÃ¡c Ä‘á»c -  ghi tá»›i shard tÆ°Æ¡ng á»©ng

Theo Ä‘á» bÃ i, cÃ³ 3 shard bá»™i 3 (má»—i máº£nh dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ 3 báº£n sao táº¡i 3 server Ä‘á»™c láº­p)
-> váº­y cáº§n 3 * 3 = 9 server cho shard
Router Ä‘iá»u hÆ°á»›ng -> cáº§n 1 server cho má»—i router -> 2 server
-> tá»•ng 11 server

1 táº­p há»£p sao chÃ©p trong mongodb cÃ³ 5 pháº§n tá»­: 1 chÃ­nh, 4 phá»¥. Äá»ƒ ghi thÃ nh cÃ´ng, dá»¯ liá»‡u cáº§n xuáº¥t hiá»‡n trÃªn máº¥y pháº§n tá»­?
Giáº£i
W:majority cáº§n quÃ¡ má»™t ná»¯a/tá»•ng sá»‘ pháº§n tá»­ ghi thÃ nh cÃ´ng([N/2] + 1 sá»‘ pháº§n tá»§) -> thÃ nh cÃ´ng 
=> cáº§n â…— tá»•ng sá»‘ pháº§n tá»­ ghi thÃ nh cÃ´ng -> sao chÃ©p thÃ nh cÃ´ng

1 táº­p há»£p sao chÃ©p trong mongodb cÃ³ 3 pháº§n tá»­: 1 chÃ­nh, 2 phá»¥. NgÆ°á»i dung cáº§n ghi 1 file dá»¯ liá»‡u 2GB vÃ o táº­p há»£p theo cháº¿ Ä‘á»™ w:majority. Há»i há»‡ thá»‘ng cáº§n Ã­t nháº¥t bao nhiÃªu khÃ´ng gian lÆ°u trá»¯ Ä‘á»ƒ chá»©a file dá»¯ liá»‡u nÃ y? Há»i há»‡ thá»‘ng cáº§n nhiá»u nháº¥t bao nhiÃªu khÃ´ng gian lÆ°u trá»¯ Ä‘á»ƒ chá»©a file dá»¯ liá»‡u nÃ y?
Giáº£i
Cháº¿ Ä‘á»™ majority -> quÃ¡ bÃ¡n sá»‘ pháº§n tá»­ ghi thÃ nh cÃ´ng thÃ¬ má»›i Ä‘Æ°á»£c tÃ­nh lÃ  thÃ nh cÃ´ng
Cáº§n Ã­t nháº¥t [3/2] + 1 = 2 pháº§n tá»­ ghi thÃ nh cÃ´ng
-> Cáº§n Ã­t nháº¥t: 2 pháº§n tá»­ ghi thÃ nh cÃ´ng (1 chÃ­nh, 1 phá»¥): 2GB * 2 =  4GB khÃ´ng gian lÆ°u trá»¯
-> Cáº§n nhiá»u nháº¥t: cáº£ 3 pháº§n tá»­ ghi thÃ nh cÃ´ng: 3 * 2 = 6GB khÃ´ng gian lÆ°u trá»¯

1 táº­p há»£p sao chÃ©p trong mongodb cÃ³ 7 pháº§n tá»­: 1 chÃ­nh, 6 phá»¥. NgÆ°á»i dÃ¹ng cáº§n ghi 1 file dá»¯ liá»‡u 2GB vÃ o táº­p há»£p theo cháº¿ Ä‘á»™ w:majority. Tá»‘c Ä‘á»™ truyá»n dá»¯ liá»‡u máº¡ng lÃ  1Gbps. Tá»‘c Ä‘á»™ ghi cá»§a Ä‘Ä©a cá»©ng lÃ  50MB/s. HÃ£y tÃ­nh thá»i gian ngáº¯n nháº¥t Ä‘á»ƒ ghi thÃ nh cÃ´ng file trÃªn.
Äá»•i 2GB = 16Gb
Thá»i gian truyá»n dá»¯ liá»‡u Ä‘áº¿n primary: 16/1(Gbps) = 16s
Äá»•i 2GB = 2*1024MB
Thá»i gian Ä‘á»ƒ ghi vÃ o Ä‘Ä©a lÃ : (2 * 1024)/50 = 40.96s
Do quÃ¡ trÃ¬nh truyá»n dá»¯ liá»‡u vÃ  ghi dá»¯ liá»‡u diá»…n ra song song, nÃªn thá»i gian Ä‘á»ƒ hoÃ n táº¥t Ä‘á»ƒ ghi thÃ nh cÃ´ng = thá»i gian ghi vÃ o Ä‘Ä©a = 40.96
Theo cháº¿ Ä‘á»™ W:majority, cáº§n [7/2] + 1 = 4 pháº§n tá»­ (1 chÃ­nh, 3 phá»¥) ghi thÃ nh cÃ´ng thÃ¬ Ä‘Æ°á»£c tÃ­nh lÃ  ghi dá»¯ liá»‡u thÃ nh cÃ´ng
-> thá»i gian ngáº¯n nháº¥t lÃ : 4 * 40.96 = 163.84s
Class Q9
CÃ¢n báº±ng táº£i lÃ  gÃ¬?
CÃ¢n báº±ng táº£i lÃ  phÃ¢n táº£i Ä‘áº¿n cÃ¡c mÃ¡y chá»§ khÃ¡c nhau Ä‘á»ƒ cÃ¹ng xá»­ lÃ½.
CÃ¢n báº±ng táº£i táº§ng 4 hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?
CÃ¢n báº±ng táº£i táº§ng 4 sáº½ chuyá»ƒn tiáº¿p lÆ°u lÆ°á»£ng truy cáº­p cá»§a ngÆ°á»i dÃ¹ng dá»±a trÃªn dáº£i IP vÃ  cá»•ng. 
NgÆ°á»i dÃ¹ng truy cáº­p vÃ o bá»™ cÃ¢n báº±ng táº£i, cÃ´ng cá»¥ nÃ y sáº½ chuyá»ƒn tiáº¿p yÃªu cáº§u cá»§a ngÆ°á»i dÃ¹ng Ä‘áº¿n nhÃ³m mÃ¡y chá»§ phá»¥ trá»£ web. 
Báº¥t ká»³ mÃ¡y chá»§ phá»¥ trá»£ nÃ o Ä‘Æ°á»£c chá»n sáº½ pháº£n há»“i trá»±c tiáº¿p yÃªu cáº§u cá»§a ngÆ°á»i dÃ¹ng. 
NÃ³i chung, táº¥t cáº£ cÃ¡c mÃ¡y chá»§ trong web-backend pháº£i cung cáº¥p ná»™i dung giá»‘ng há»‡t nhau â€“ náº¿u khÃ´ng ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ nháº­n Ä‘Æ°á»£c ná»™i dung khÃ´ng nháº¥t quÃ¡n.
CÃ¢n báº±ng táº£i táº§ng 7 hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?
Sá»­ dá»¥ng lá»›p 7 cho phÃ©p bá»™ cÃ¢n báº±ng táº£i chuyá»ƒn tiáº¿p cÃ¡c yÃªu cáº§u Ä‘áº¿n cÃ¡c mÃ¡y chá»§ phá»¥ trá»£ khÃ¡c nhau dá»±a trÃªn ná»™i dung yÃªu cáº§u cá»§a ngÆ°á»i dÃ¹ng. 
Cháº¿ Ä‘á»™ cÃ¢n báº±ng táº£i nÃ y cho phÃ©p báº¡n cháº¡y nhiá»u mÃ¡y chá»§ á»©ng dá»¥ng web trong cÃ¹ng má»™t miá»n vÃ  cá»•ng.

Äá»™ sáºµn sÃ ng cao lÃ  gÃ¬?
Thiáº¿t láº­p tÃ­nh sáºµn sÃ ng cao (HA) lÃ  má»™t cÆ¡ sá»Ÿ háº¡ táº§ng khÃ´ng cÃ³ má»™t Ä‘iá»ƒm lá»—i nÃ o. 
NÃ³ ngÄƒn cháº·n má»™t lá»—i mÃ¡y chá»§ duy nháº¥t trá»Ÿ thÃ nh sá»± kiá»‡n thá»i gian cháº¿t báº±ng cÃ¡ch thÃªm dá»± phÃ²ng vÃ o má»i lá»›p kiáº¿n â€‹â€‹trÃºc cá»§a báº¡n.
Báº¡n cÅ©ng cáº§n pháº£i cÃ³ bá»™ cÃ¢n báº±ng táº£i dá»± phÃ²ng.

Round-robin cÃ³ trá»ng sá»‘
Trá»ng sá»‘ Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh cho má»—i mÃ¡y chá»§ dá»±a trÃªn cÃ¡c tiÃªu chÃ­ do quáº£n trá»‹ viÃªn trang web chá»n; tiÃªu chÃ­ Ä‘Æ°á»£c sá»­ dá»¥ng phá»• biáº¿n nháº¥t lÃ  kháº£ nÄƒng xá»­ lÃ½ lÆ°u lÆ°á»£ng truy cáº­p cá»§a mÃ¡y chá»§. Trá»ng sá»‘ cÃ ng cao, tá»· lá»‡ yÃªu cáº§u mÃ¡y khÃ¡ch mÃ  mÃ¡y chá»§ nháº­n Ä‘Æ°á»£c cÃ ng lá»›n. VÃ­ dá»¥: náº¿u mÃ¡y chá»§ A Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh trá»ng sá»‘ lÃ  3 vÃ  mÃ¡y chá»§ B cÃ³ trá»ng sá»‘ lÃ  1, bá»™ cÃ¢n báº±ng táº£i sáº½ chuyá»ƒn tiáº¿p 3 yÃªu cáº§u Ä‘áº¿n mÃ¡y chá»§ A cho má»—i yÃªu cáº§u mÃ  nÃ³ gá»­i Ä‘áº¿n mÃ¡y chá»§ B.
Má»™t cluster cÃ³ 3 mÃ¡y chá»§ A, B, C vá»›i trá»ng sá»‘ tÆ°Æ¡ng á»©ng la 4, 3, 2. CÃ³ 180 request Ä‘áº¿n bá»™ cÃ¢n báº±ng táº£i. HÃ£y tÃ­nh sá»‘ request phÃ¢n phá»‘i cho cÃ¡c mÃ¡y chá»§ dÃ¹ng thuáº­t toÃ¡n Round-robin cÃ³ trá»ng sá»‘.
 Tá»•ng trá»ng sá»‘: 4 + 3 + 2 = 9
-> A: nháº­n 4/9 request, B nháº­n 3/9 request, C nháº­n 2/9 request
Ta cÃ³: A: 180/9*4=80 request
B: 60 request
C: 40 request

Má»™t cluster cÃ³ 3 mÃ¡y chá»§ A, B, C vá»›i sá»‘ connection Ä‘ang xá»­ lÃ½ tÆ°Æ¡ng á»©ng la 433, 413, 403. CÃ³ 180 request Ä‘áº¿n bá»™ cÃ¢n báº±ng táº£i. HÃ£y tÃ­nh sá»‘ request phÃ¢n phá»‘i cho cÃ¡c mÃ¡y chá»§ dÃ¹ng thuáº­t toÃ¡n least connection.
Least connection: MÃ¡y chá»§ nÃ o nháº­n Ã­t request nháº¥t sáº½ Ä‘Æ°á»£c phÃ¢n thÃªm request
Theo bÃ i ta tháº¥y C cÃ³ Ã­t request nháº¥t (403) -> thÃªm 10 request cho C, cÃ²n 180 - 10 = 170 request
C = B = 413 request ( < A) thÃªm C, B 20 request ná»¯a, cÃ²n 170 - (20 * 2) = 130 request
A = B = C (433 request)
Chia Ä‘á»u 43 request cho má»—i mÃ¡y chá»§, A = B = C = 476, cÃ²n 130 - (3 * 43) = 1 request
CÃ²n 1 request thÃ¬ tháº§y báº£o thÃªm vÃ o cÃ¡i nÃ o cÅ©ng Ä‘Æ°á»£c ğŸ˜€ nÃªn lÃ  thÃªm vÃ o A
-> B = C = 476, A = 477
 Class Q10
Táº¡i sao má»i ngÆ°á»i váº«n e ngáº¡i viá»‡c sá»­ dá»¥ng Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y?
ÄÃ¡m mÃ¢y hoáº¡t Ä‘á»™ng nhÆ° má»™t há»™p Ä‘en lá»›n, khÃ´ng cÃ³ gÃ¬ bÃªn trong Ä‘Ã¡m mÃ¢y hiá»ƒn thá»‹ cho khÃ¡ch hÃ ng
KhÃ¡ch hÃ ng khÃ´ng cÃ³ Ã½ tÆ°á»Ÿng hoáº·c khÃ´ng kiá»ƒm soÃ¡t Ä‘Æ°á»£c nhá»¯ng gÃ¬ xáº£y ra bÃªn trong má»™t Ä‘Ã¡m mÃ¢y
Ngay cáº£ khi nhÃ  cung cáº¥p Ä‘Ã¡m mÃ¢y trung thá»±c, nÃ³ cÃ³ thá»ƒ cÃ³ nhá»¯ng quáº£n trá»‹ viÃªn há»‡ thá»‘ng Ä‘á»™c háº¡i, nhá»¯ng ngÆ°á»i cÃ³ thá»ƒ giáº£ máº¡o cÃ¡c mÃ¡y áº£o vÃ  vi pháº¡m tÃ­nh báº£o máº­t vÃ  tÃ­nh toÃ n váº¹n
Nguy cÆ¡ máº¥t kiá»ƒm soÃ¡t lÃ  gÃ¬?
Dá»¯ liá»‡u, á»©ng dá»¥ng, tÃ i nguyÃªn Ä‘Æ°á»£c Ä‘á»‹nh vá»‹ vá»›i nhÃ  cung cáº¥p
Quáº£n lÃ½ danh tÃ­nh ngÆ°á»i dÃ¹ng do Ä‘Ã¡m mÃ¢y xá»­ lÃ½
CÃ¡c quy táº¯c kiá»ƒm soÃ¡t quyá»n truy cáº­p cá»§a ngÆ°á»i dÃ¹ng, chÃ­nh sÃ¡ch báº£o máº­t vÃ  viá»‡c thá»±c thi Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi nhÃ  cung cáº¥p Ä‘Ã¡m mÃ¢y
NgÆ°á»i tiÃªu dÃ¹ng tin tÆ°á»Ÿng vÃ o nhÃ  cung cáº¥p Ä‘á»ƒ Ä‘áº£m báº£o
Báº£o máº­t dá»¯ liá»‡u vÃ  quyá»n riÃªng tÆ°
Nguá»“n lá»±c sáºµn cÃ³
GiÃ¡m sÃ¡t vÃ  sá»­a chá»¯a cÃ¡c dá»‹ch vá»¥ / tÃ i nguyÃªn

Váº¥n Ä‘á» cá»§a sá»± thiáº¿u tin tÆ°á»Ÿng lÃ  gÃ¬?
Tin tÆ°á»Ÿng vÃ o má»™t bÃªn thá»© ba Ä‘Ã²i há»i pháº£i cháº¥p nháº­n rá»§i ro
Váº¥n Ä‘á» gÃ¢y ra do nhiá»u ngÆ°á»i thuÃª lÃ  gÃ¬?
Xung Ä‘á»™t giá»¯a cÃ¡c má»¥c tiÃªu Ä‘á»‘i láº­p cá»§a ngÆ°á»i thuÃª dá»‹ch vá»¥
NgÆ°á»i thuÃª chia sáº» cÃ¹ng nguá»“n tÃ i nguyÃªn vÃ  cÃ³ má»¥c tiÃªu Ä‘á»‘i láº­p
Viá»‡c cho nhiá»u ngÆ°á»i thuÃª Ä‘á»‘i phÃ³ vá»›i xung Ä‘á»™t lá»£i Ã­ch nhÆ° tháº¿ nÃ o?
Nhá»¯ng ngÆ°á»i thuÃª cÃ³ thá»ƒ hÃ²a thuáº­n vá»›i nhau vÃ  â€˜chÆ¡i Ä‘áº¹pâ€™ khÃ´ng?
Náº¿u há» khÃ´ng thá»ƒ, chÃºng ta cÃ³ thá»ƒ cÃ¡ch ly há» khÃ´ng?
LÃ m tháº¿ nÃ o Ä‘á»ƒ cung cáº¥p sá»± tÃ¡ch biá»‡t giá»¯a nhá»¯ng ngÆ°á»i thuÃª?
NÃªu 3 giáº£i phÃ¡p giáº£i quyáº¿t nguy cÆ¡ máº¥t kiá»ƒm soÃ¡t.
GiÃ¡m sÃ¡t
Sá»­ dá»¥ng cÃ¡c Ä‘Ã¡m mÃ¢y khÃ¡c nhau
Quáº£n lÃ½ kiá»ƒm soÃ¡t truy cáº­p
Quáº£n lÃ½ danh tÃ­nh (IDM)
NÃªu 3 giáº£i phÃ¡p giáº£i quyáº¿t sá»± thiáº¿u tin tÆ°á»Ÿng.
NgÃ´n ngá»¯ chÃ­nh sÃ¡ch
Chá»©ng nháº­n
NÃªu giáº£i phÃ¡p giáº£i quyáº¿t váº¥n Ä‘á» nhiá»u ngÆ°á»i thuÃª.
CÃ³ thá»ƒ cá»‘ gáº¯ng tÄƒng cÆ°á»ng sá»± cÃ´ láº­p giá»¯a nhá»¯ng ngÆ°á»i thuÃª 
Ká»¹ thuáº­t cÃ¡ch ly máº¡nh (VPC á»Ÿ má»™t má»©c Ä‘á»™ nÃ o Ä‘Ã³)
C.f. CÃ¡c cuá»™c táº¥n cÃ´ng kÃªnh bÃªn VM (T. Ristenpart et al.)
YÃªu cáº§u QoS cáº§n Ä‘Æ°á»£c Ä‘Ã¡p á»©ng
Giáº£ sá»­ báº¡n la 1 ngÃ¢n hÃ ng muá»‘n dÃ¹ng cloud, hÃ£y xÃ¢y dá»±ng má»™t bá»™ yÃªu cáº§u cá»¥ thá»ƒ vá»›i cloud provider (cÃ¢n báº±ng táº£i, instance VM, dá»¯ liá»‡u, logging, ) nháº±m giáº£m cÃ¡c nguy cÆ¡ an ninh, an toÃ n khi sá»­ dá»¥ng dá»‹ch vá»¥.  




Háº¡ táº§ng: VPC tÃ¡ch biá»‡t, isolation VM, LB chá»‘ng DDoS
Dá»¯ liá»‡u; MÃ£ hÃ³a AES-256, quáº£n lÃ½ khÃ³a bá»Ÿi ngÃ¢n hÃ ng, chá»‘ng sao chÃ©p trÃ¡i phÃ©p
IAM/IDM
Federation, MFA, RBAC, kiá»ƒm soÃ¡t truy cáº­p Ä‘a lá»›p
Logging
Log Ä‘áº§y Ä‘á»§, gá»­i vá» SIEM, khÃ´ng thá»ƒ chá»‰nh sá»­a
GiÃ¡m sÃ¡t
Realtime monitoring, cáº£nh bÃ¡o, IR â‰¤ 15 phÃºt
SLA
Uptime 99.99%, chá»©ng nháº­n ISO/SOC/PCI
Multi-cloud
KhÃ´ng vendor lock-in
An ninh
WAF, IDS/IPS, Anti-DDoS
Báº£o máº­t ná»™i bá»™ provider
Kiá»ƒm soÃ¡t truy cáº­p nhÃ¢n viÃªn, kiá»ƒm toÃ¡n Ä‘á»‹nh ká»³


1 vÃ­ nháº­n diá»‡n ngÆ°á»i dÃ¹ng cÃ³ cÃ¡c thÃ´ng tin sau:
TÃªn, ngÃ y-thÃ¡ng-nÄƒm sinh, username, password, email, tel, address, tax code, credit card, job, office, marital status.
XÃ¡c Ä‘á»‹nh cÃ¡c thÃ´ng tin cáº§n thiáº¿t cho cÃ¡c dá»‹ch vá»¥ sau:
Web mail
Google meet
Shoppee customer
Shoppee seller
Facebook







